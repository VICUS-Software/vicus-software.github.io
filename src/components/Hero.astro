---
import { getLangFromUrl, useTranslations, url } from '../i18n/utils';
import type { Language } from '../i18n/languages';

interface Props {
  headline?: string;
  subheadline?: string;
  description?: string;
  screenshot?: string;
  screenshotAlt?: string;
  primaryBtnText?: string;
  primaryBtnHref?: string;
  secondaryBtnText?: string;
  secondaryBtnHref?: string;
}

const lang = getLangFromUrl(Astro.url) as Language;
const t = useTranslations(lang);

const defaultContent = {
  de: {
    headline: 'Software für die Gebäude– und Wärmenetzplanung.',
    subheadline: 'Schnell. Sicher. Simulationsgestützt.',
    description: 'Mit <strong>VICUS Buildings</strong> und <strong>VICUS Districts</strong> planen Sie <strong>energieeffiziente Gebäude</strong> und <strong>nachhaltige Wärmenetze</strong> schnell, präzise und zuverlässig. Unsere <strong>simulationsgestützte Software</strong> unterstützt Sie dabei einfach und intuitiv – für eine erfolgreiche Umsetzung der <strong>Energiewende</strong>.',
    demoBtn: 'Demo buchen',
    contactBtn: 'Kontaktiere uns'
  },
  en: {
    headline: 'Software for Building and Heat Network Planning.',
    subheadline: 'Fast. Reliable. Simulation-based.',
    description: 'With <strong>VICUS Buildings</strong> and <strong>VICUS Districts</strong> you plan <strong>energy-efficient buildings</strong> and <strong>sustainable heat networks</strong> quickly, precisely and reliably. Our <strong>simulation-based software</strong> supports you easily and intuitively – for a successful implementation of the <strong>energy transition</strong>.',
    demoBtn: 'Book Demo',
    contactBtn: 'Contact Us'
  }
};

const defaults = defaultContent[lang];

const {
  headline = defaults.headline,
  subheadline = defaults.subheadline,
  description = defaults.description,
  screenshot = '/images/screenshots/vicus-districts-gui.png',
  screenshotAlt = 'VICUS Software',
  primaryBtnText = defaults.demoBtn,
  primaryBtnHref = url(`/${lang}/demo`),
  secondaryBtnText = defaults.contactBtn,
  secondaryBtnHref = url(`/${lang}/${lang === 'de' ? 'kontakt' : 'contact'}`),
} = Astro.props;
---

<section class="relative min-h-screen flex items-center overflow-hidden">
  <!-- Background gradient -->
  <div class="absolute inset-0 bg-gradient-to-br from-background via-background to-tertiary/10"></div>

  <!-- Content -->
  <div class="container-custom relative z-10 pt-24 pb-16">
    <div class="grid lg:grid-cols-2 gap-12 lg:gap-8 items-center">
      <!-- Left: Text Content -->
      <div class="max-w-xl">
        <h1 class="text-4xl md:text-5xl lg:text-[3.25rem] font-bold text-foreground leading-tight mb-4 animate-fade-in">
          {headline}
        </h1>
        <p class="text-2xl md:text-3xl font-bold text-primary mb-6 animate-fade-in animation-delay-200">
          {subheadline}
        </p>
        <p class="text-lg text-foreground/80 mb-10 leading-relaxed animate-fade-in animation-delay-300" set:html={description} />

        <div class="flex flex-wrap gap-4 animate-fade-in animation-delay-400">
          <a href={primaryBtnHref} class="btn btn-primary inline-flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            {primaryBtnText}
          </a>
          <a href={secondaryBtnHref} class="btn btn-secondary inline-flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
            {secondaryBtnText}
          </a>
        </div>
      </div>

      <!-- Right: Laptop Mockup -->
      <div class="relative animate-fade-in animation-delay-300 hidden lg:block">
        <div class="laptop-wrapper">
          <!-- Laptop Frame -->
          <img src="/images/laptop-frame.svg" alt="" class="laptop-frame" />
          <!-- Screenshot inside laptop -->
          <img
            src={screenshot}
            alt={screenshotAlt}
            class="laptop-screenshot"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
    opacity: 0;
  }

  .animation-delay-200 {
    animation-delay: 0.2s;
  }

  .animation-delay-300 {
    animation-delay: 0.3s;
  }

  .animation-delay-400 {
    animation-delay: 0.4s;
  }

  /* Laptop Mockup Styles */
  .laptop-wrapper {
    position: relative;
    max-width: 650px;
    margin-left: auto;
  }

  .laptop-frame {
    width: 100%;
    height: auto;
    display: block;
    filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4));
  }

  .laptop-screenshot {
    position: absolute;
    top: 8.5%;
    left: 11%;
    width: 78.8%;
    height: auto;
    border-radius: 2px;
  }
</style>

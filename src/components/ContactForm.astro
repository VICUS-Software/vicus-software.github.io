---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import type { Language } from '../i18n/languages';
import { HUBSPOT_CONFIG } from '../config/hubspot';

const lang = getLangFromUrl(Astro.url) as Language;
const t = useTranslations(lang);
---

<form
  id="contact-form"
  class="space-y-6"
  data-hubspot-portal={HUBSPOT_CONFIG.portalId}
  data-hubspot-form={HUBSPOT_CONFIG.formIds.contact}
  data-success-de="Ihre Nachricht wurde erfolgreich gesendet."
  data-success-en="Your message has been sent successfully."
>
  <div class="grid md:grid-cols-2 gap-6">
    <div class="form-group">
      <label for="firstname" class="form-label">
        {t('form.firstname')} <span class="text-primary">*</span>
      </label>
      <input
        type="text"
        id="firstname"
        name="firstname"
        required
        class="form-input"
        placeholder={lang === 'de' ? 'Vorname' : 'First name'}
      />
    </div>
    <div class="form-group">
      <label for="lastname" class="form-label">
        {t('form.lastname')} <span class="text-primary">*</span>
      </label>
      <input
        type="text"
        id="lastname"
        name="lastname"
        required
        class="form-input"
        placeholder={lang === 'de' ? 'Nachname' : 'Last name'}
      />
    </div>
    <div class="form-group">
      <label for="email" class="form-label">
        {t('form.email')} <span class="text-primary">*</span>
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="form-input"
        placeholder={lang === 'de' ? 'ihre@email.de' : 'your@email.com'}
      />
    </div>
  </div>

  <div class="grid md:grid-cols-2 gap-6">
    <div class="form-group">
      <label for="company" class="form-label">{t('form.company')}</label>
      <input
        type="text"
        id="company"
        name="company"
        class="form-input"
        placeholder={lang === 'de' ? 'Firmenname' : 'Company name'}
      />
    </div>
    <div class="form-group">
      <label for="phone" class="form-label">{t('form.phone')}</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        class="form-input"
        placeholder="+49 123 456 789"
      />
    </div>
  </div>

  <div class="form-group">
    <label for="subject" class="form-label">
      {t('form.subject')} <span class="text-primary">*</span>
    </label>
    <input
      type="text"
      id="subject"
      name="subject"
      required
      class="form-input"
      placeholder={lang === 'de' ? 'Betreff Ihrer Anfrage' : 'Subject of your inquiry'}
    />
  </div>

  <div class="form-group">
    <label for="message" class="form-label">
      {t('form.message')} <span class="text-primary">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      required
      rows="5"
      class="form-input resize-none"
      placeholder={lang === 'de' ? 'Ihre Nachricht...' : 'Your message...'}
    ></textarea>
  </div>

  <div id="contact-form-status" class="hidden p-4 rounded-lg"></div>

  <button type="submit" class="btn btn-primary w-full md:w-auto">
    {t('btn.submit')}
  </button>
</form>


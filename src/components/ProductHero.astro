---
import { getLangFromUrl, useTranslations, url } from '../i18n/utils';
import type { Language } from '../i18n/languages';

interface Props {
  product: 'buildings' | 'districts';
  headline: string;
  subheadline: string;
  description?: string;
  screenshot: string;
  screenshotAlt?: string;
  primaryBtnText: string;
  primaryBtnHref: string;
  secondaryBtnText: string;
  secondaryBtnHref: string;
}

const lang = getLangFromUrl(Astro.url) as Language;

const {
  product,
  headline,
  subheadline,
  description,
  screenshot,
  screenshotAlt = 'VICUS Software',
  primaryBtnText,
  primaryBtnHref,
  secondaryBtnText,
  secondaryBtnHref,
} = Astro.props;

const accentColor = product === 'buildings' ? 'primary' : 'primary';
---

<section class="relative pt-28 pb-16 lg:pt-32 lg:pb-20 overflow-hidden">
  <!-- Background gradient -->
  <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-background"></div>
  <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3"></div>

  <!-- Content -->
  <div class="container-custom relative z-10">
    <div class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
      <!-- Left: Text Content -->
      <div class="max-w-xl">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6 animate-fade-in">
          <span class="w-2 h-2 rounded-full bg-primary"></span>
          VICUS {product === 'buildings' ? 'BUILDINGS' : 'DISTRICTS'}
        </div>

        <h1 class="text-4xl md:text-5xl lg:text-[3.25rem] font-bold text-foreground leading-tight mb-4 animate-fade-in animation-delay-100">
          {headline}
        </h1>

        <p class="text-xl md:text-2xl font-semibold text-primary mb-6 animate-fade-in animation-delay-200">
          {subheadline}
        </p>

        {description && (
          <p class="text-lg text-foreground/70 mb-8 leading-relaxed animate-fade-in animation-delay-300" set:html={description} />
        )}

        <div class="flex flex-wrap gap-4 animate-fade-in animation-delay-400">
          <a href={primaryBtnHref} class="btn btn-primary">
            {primaryBtnText}
          </a>
          <a href={secondaryBtnHref} class="btn btn-secondary">
            {secondaryBtnText}
          </a>
        </div>
      </div>

      <!-- Right: Laptop Mockup -->
      <div class="relative animate-fade-in animation-delay-300">
        <div class="laptop-wrapper">
          <!-- Glow effect -->
          <div class="absolute -inset-8 bg-gradient-to-br from-primary/15 to-primary/5 rounded-full blur-3xl"></div>

          <!-- Laptop Frame -->
          <img src="/images/laptop-frame.svg" alt="" class="laptop-frame relative" />

          <!-- Screenshot inside laptop -->
          <img
            src={screenshot}
            alt={screenshotAlt}
            class="laptop-screenshot"
            loading="eager"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
    opacity: 0;
  }

  .animation-delay-100 {
    animation-delay: 0.1s;
  }

  .animation-delay-200 {
    animation-delay: 0.2s;
  }

  .animation-delay-300 {
    animation-delay: 0.3s;
  }

  .animation-delay-400 {
    animation-delay: 0.4s;
  }

  /* Laptop Mockup Styles */
  .laptop-wrapper {
    position: relative;
    max-width: 650px;
    margin-left: auto;
  }

  .laptop-frame {
    width: 100%;
    height: auto;
    display: block;
    filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.4));
  }

  .laptop-screenshot {
    position: absolute;
    top: 8.5%;
    left: 11%;
    width: 78.8%;
    height: auto;
    border-radius: 2px;
  }
</style>
